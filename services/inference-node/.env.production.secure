# ============================================================================
# MEDICAL AI INFERENCE SYSTEM - PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
# SECURITY: Keep this file secure and never commit to version control
# Generated: 2026-01-04
# ============================================================================

# DATABASE CONFIGURATION
# ============================================================================
# Connection string with strong password (CHANGE THESE IN PRODUCTION)
DATABASE_URL=postgresql+asyncpg://medical_ai:j8cpfCfnnHTUDXtl0gNxiJ7n9E6pGwlFNB8KKpUbEso@localhost:5432/medical_ai_prod
DB_ECHO=false
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_RECYCLE=3600
DB_ECHO_POOL=false

# SECURITY & JWT
# ============================================================================
# Strong JWT secret (MUST change in production - 64+ characters)
JWT_SECRET_KEY=2kHYVBuiUlkS1RhkvDjb0vg2BW65C8ZO8tR2vEULxQaFAgoEpExkuQ3i3ClFjDJc
JWT_ALGORITHM=HS256
JWT_EXPIRATION_HOURS=24
JWT_REFRESH_EXPIRATION_DAYS=30

# Disable development mode for production
ALLOW_INSECURE_DEV=false

# CORS Configuration
CORS_ORIGINS=["https://your-frontend-domain.com"]
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=["GET","POST","PUT","DELETE","OPTIONS"]
CORS_ALLOW_HEADERS=["Content-Type","Authorization","X-API-Key"]

# API CONFIGURATION
# ============================================================================
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=4
API_TIMEOUT=60
API_KEEPALIVE_TIMEOUT=75

# ENVIRONMENT
# ============================================================================
ENVIRONMENT=production
LOG_LEVEL=INFO
LOG_FORMAT=json
DEBUG=false

# HUGGING FACE (for embeddings and models)
# ============================================================================
HF_TOKEN=hf_your_token_here  # Get from https://huggingface.co/settings/tokens

# MODEL CONFIGURATION
# ============================================================================
PREFERRED_BACKEND=llama.cpp
VLLM_ENABLED=true
VLLM_TENSOR_PARALLEL=1
VLLM_MAX_WORKERS=1
LLAMA_CPP_INSTANCES=3
DEFAULT_MODEL=tiny-llama-1b
MAX_TOKENS=2000

# ASYNC TASK QUEUE CONFIGURATION
# ============================================================================
QUEUE_MAX_SIZE=1000
QUEUE_BATCH_SIZE=8
QUEUE_BATCH_TIMEOUT_MS=100
QUEUE_RESULT_TTL_SECONDS=300
TASK_DEFAULT_TIMEOUT_SECONDS=60
TASK_MAX_RETRIES=3

# REDIS CONFIGURATION (Optional - for distributed task queue)
# ============================================================================
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_POOL_SIZE=10

# GPU CONFIGURATION
# ============================================================================
GPU_MEMORY_THRESHOLD_MB=20000  # 20GB threshold
GPU_TEMP_THRESHOLD_C=80
GPU_POWER_LIMIT_W=350

# MONITORING & OBSERVABILITY
# ============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
METRICS_ENABLED=true
SENTRY_ENABLED=false
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# MAINTENANCE
# ============================================================================
ENABLE_MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="System undergoing maintenance. Please try again later."
MAX_REQUEST_SIZE=100  # MB

# RAG ENGINE CONFIGURATION
# ============================================================================
RAG_ENABLED=true
EMBEDDING_MODEL=BAAI/bge-large-en-v1.5
EMBEDDING_BATCH_SIZE=32

# CACHE CONFIGURATION
# ============================================================================
CACHE_TYPE=in-memory  # or redis
CACHE_TTL=300  # 5 minutes
CACHE_MAX_SIZE=1000

# RATE LIMITING
# ============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_PERIOD=60  # seconds

# SECURITY HEADERS
# ============================================================================
ENABLE_SECURITY_HEADERS=true
X_FRAME_OPTIONS=DENY
X_CONTENT_TYPE_OPTIONS=nosniff
X_XSS_PROTECTION=1;mode=block
STRICT_TRANSPORT_SECURITY=max-age=31536000;includeSubDomains

# ============================================================================
# PRODUCTION DEPLOYMENT NOTES:
# ============================================================================
# 1. Change JWT_SECRET_KEY to a unique value
# 2. Update DATABASE_URL with secure credentials
# 3. Set CORS_ORIGINS to your actual frontend domain(s)
# 4. Add HF_TOKEN if using Hugging Face models
# 5. Configure Redis if using distributed task queue
# 6. Set SENTRY_DSN for error tracking
# 7. Verify ALLOW_INSECURE_DEV=false
# 8. Use HTTPS in production (configure via Nginx)
# 9. Store this file securely (chmod 600 .env.production)
# 10. Never commit sensitive values to version control
# ============================================================================
